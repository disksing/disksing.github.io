<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>适合程序员的桌面窗口管理方案 - 硬盘在歌唱</title><link rel=icon type=image/png href=favicon.png><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="介绍下我在办公室使用的桌面窗口管理方案。 先说下硬件：我的工作电脑是一台 13 英寸的 Macbook Pro，外接了一个 27 英寸的显示器，使用了一个电脑支架把笔记本"><meta property="og:image" content><meta property="og:title" content="适合程序员的桌面窗口管理方案"><meta property="og:description" content="介绍下我在办公室使用的桌面窗口管理方案。 先说下硬件：我的工作电脑是一台 13 英寸的 Macbook Pro，外接了一个 27 英寸的显示器，使用了一个电脑支架把笔记本"><meta property="og:type" content="article"><meta property="og:url" content="http://disksing.com/desktop-layout/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-03-15T00:00:00+00:00"><meta property="article:modified_time" content="2022-03-15T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="适合程序员的桌面窗口管理方案"><meta name=twitter:description content="介绍下我在办公室使用的桌面窗口管理方案。 先说下硬件：我的工作电脑是一台 13 英寸的 Macbook Pro，外接了一个 27 英寸的显示器，使用了一个电脑支架把笔记本"><link href=http://disksing.com/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=http://disksing.com/css/main.40ca3a860425083862b7ebd55447caec5c4384573f0cb098b8d06a91e8dace2e.css></head><body><div class=content><header><div class=main><a href=http://disksing.com/>硬盘在歌唱</a></div><nav><a href=/>主页</a>
<a href=/post/>文章</a>
<a href=/project/>开源项目</a>
<a href=/about/>关于</a></nav></header><main><article><div class=title><h1 class=title>适合程序员的桌面窗口管理方案</h1><div class=meta>Posted on Mar 15, 2022</div></div><section class=body><p>介绍下我在办公室使用的桌面窗口管理方案。</p><p>先说下硬件：我的工作电脑是一台 13 英寸的 Macbook Pro，外接了一个 27 英寸的显示器，使用了一个电脑支架把笔记本架起来了，这样两个显示器差不多是并排的样子。</p><p>然后看下我的窗口布局规划，可能会比较特殊一点，不过是经过精心考虑的。</p><figure style=text-align:center><img src=/assets/img/desktop-layout.png><figcaption align=center><span>桌面布局示意</span></figcaption></figure><p>右边的大显示器我按 1:2 分成两列，左边这一列是最大的显示空间，我把它当作“主空间”来使用，一般我在编码状态下会把编辑器放在这个位置，非编码状态下这里通常就是浏览器了。因为本来两个显示器的大小是不一样的，这样进行划分，主空间两侧的空间反而是比较均衡的状态了。显示器和电脑屏幕在桌子上的摆放也是非对称的，当我坐下时，正对着的是这个“主空间”的正中央，这样也避免一个常见问题：两个一样大的显示器对称排布时，正对着的位置恰好是两个显示器中间的缝，于是工作中几乎时刻是扭着头的，时间一长脖子就受不了了。</p><p>左边笔记本的屏幕没有做切分，这块空间一般在编码的时候放浏览器看文档资料，或者放个 Terminal 调试，也可以是另一份代码，使用完整的屏幕保证它总是够用的，不至于不得不把窗口拉大然后频繁切换窗口。</p><p>大显示器右边的 1/3 被一分为二，这两块空间主要用来放IM软件，包括飞书、Telegram、微信、QQ、Twitter桌面版……IM软件也平铺出来也是为了减少切换窗口，我只需要在干正事的时候时不时瞟一眼就行了，有需要关注的消息时再去处理。必要的时候这个小格也可以临时放一下 Terminal 之类的小窗口。</p><p>再说窗口管理软件方面，可能我的搞法比较变态，我也没找到合适的软件，最后使用的方案是 HammerSpoon 一点脚本，HammerSpoon 大体上就是 Mac 版的 AHK，功能是弱了很多，不过在窗口管理这一块还是完全够用的。我的脚本很简单，使用 4 个快捷键，分别把窗口移动到 4 个格子：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>hs.hotkey.bind(<span style=background-color:#fff0f0>&#34;cmd&#34;</span>, <span style=background-color:#fff0f0>&#34;1&#34;</span>, <span style=color:#080;font-weight:700>function</span>()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>    <span style=color:#080;font-weight:700>local</span> sf <span style=color:#333>=</span> hs.screen.primaryScreen():frame()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>    hs.window.focusedWindow():setFrame(hs.geometry.new(sf.x, sf.y, sf.w<span style=color:#333>*</span><span style=color:#00d;font-weight:700>2</span><span style=color:#333>/</span><span style=color:#00d;font-weight:700>3</span>, sf.h))
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#080;font-weight:700>end</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>hs.hotkey.bind(<span style=background-color:#fff0f0>&#34;cmd&#34;</span>, <span style=background-color:#fff0f0>&#34;2&#34;</span>, <span style=color:#080;font-weight:700>function</span>()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>    hs.window.focusedWindow():setFrame(hs.screen.allScreens()[<span style=color:#00d;font-weight:700>2</span>]:frame())
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#080;font-weight:700>end</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>hs.hotkey.bind(<span style=background-color:#fff0f0>&#34;cmd&#34;</span>, <span style=background-color:#fff0f0>&#34;3&#34;</span>, <span style=color:#080;font-weight:700>function</span>()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>    <span style=color:#080;font-weight:700>local</span> sf <span style=color:#333>=</span> hs.screen.primaryScreen():frame()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>    hs.window.focusedWindow():setFrame(hs.geometry.new(sf.x<span style=color:#333>+</span>sf.w<span style=color:#333>*</span><span style=color:#00d;font-weight:700>2</span><span style=color:#333>/</span><span style=color:#00d;font-weight:700>3</span>, sf.y, sf.w<span style=color:#333>/</span><span style=color:#00d;font-weight:700>3</span>, sf.h<span style=color:#333>/</span><span style=color:#00d;font-weight:700>2</span>))
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#080;font-weight:700>end</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>hs.hotkey.bind(<span style=background-color:#fff0f0>&#34;cmd&#34;</span>, <span style=background-color:#fff0f0>&#34;4&#34;</span>, <span style=color:#080;font-weight:700>function</span>()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>    <span style=color:#080;font-weight:700>local</span> sf <span style=color:#333>=</span> hs.screen.primaryScreen():frame()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>    hs.window.focusedWindow():setFrame(hs.geometry.new(sf.x<span style=color:#333>+</span>sf.w<span style=color:#333>*</span><span style=color:#00d;font-weight:700>2</span><span style=color:#333>/</span><span style=color:#00d;font-weight:700>3</span>, sf.y<span style=color:#333>+</span>sf.h<span style=color:#333>/</span><span style=color:#00d;font-weight:700>2</span>, sf.w<span style=color:#333>/</span><span style=color:#00d;font-weight:700>3</span>, sf.h<span style=color:#333>/</span><span style=color:#00d;font-weight:700>2</span>))
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#080;font-weight:700>end</span>)
</span></span></code></pre></div><p>最后还有一个问题，就是我平时需要启动的 IM 太多了，虽然大部分消息都是不需要实时处理的，但是为了不错过重要消息，不得不隔一段时间手动检查一遍。解决这个问题我还是用 HammerSpoon 脚本，我会把各种不需要实时关心的IM窗口全扔到4号格子里，然后用脚本开个定时器，隔一段时间就把这一坨里在最下面的窗口给捞到最前面。3号窗口是固定不切换的，预留给比较重要的IM窗口，比如飞书。</p><p>这个切换窗口的 HammerSpoon 脚本也分享一下：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#080;font-weight:700>local</span> myTimer <span style=color:#333>=</span> hs.timer.new(<span style=color:#00d;font-weight:700>120</span>, <span style=color:#080;font-weight:700>function</span>()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>    <span style=color:#080;font-weight:700>local</span> sf <span style=color:#333>=</span> hs.screen.primaryScreen():frame()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>    <span style=color:#080;font-weight:700>local</span> windows <span style=color:#333>=</span> hs.window.orderedWindows()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>    <span style=color:#080;font-weight:700>local</span> bottom_win <span style=color:#333>=</span> <span style=color:#080;font-weight:700>nil</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>    <span style=color:#080;font-weight:700>for</span> i, win <span style=color:#080;font-weight:700>in</span> ipairs(windows) <span style=color:#080;font-weight:700>do</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>        <span style=color:#080;font-weight:700>local</span> fm <span style=color:#333>=</span> win:frame()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>        <span style=color:#080;font-weight:700>if</span> math.abs(fm.x<span style=color:#333>-</span>(sf.x<span style=color:#333>+</span>sf.w<span style=color:#333>*</span><span style=color:#00d;font-weight:700>2</span><span style=color:#333>/</span><span style=color:#00d;font-weight:700>3</span>))<span style=color:#333>&lt;</span><span style=color:#00d;font-weight:700>1</span> <span style=color:#000;font-weight:700>and</span> math.abs(fm.y<span style=color:#333>-</span>(sf.y<span style=color:#333>+</span>sf.h<span style=color:#333>/</span><span style=color:#00d;font-weight:700>2</span>))<span style=color:#333>&lt;</span><span style=color:#00d;font-weight:700>1</span> <span style=color:#080;font-weight:700>then</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>            <span style=color:#080;font-weight:700>if</span> win:id() <span style=color:#333>==</span> hs.window.focusedWindow():id() <span style=color:#080;font-weight:700>then</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>                <span style=color:#080;font-weight:700>break</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>            <span style=color:#080;font-weight:700>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>            bottom_win <span style=color:#333>=</span> win
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>        <span style=color:#080;font-weight:700>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>    <span style=color:#080;font-weight:700>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>    <span style=color:#080;font-weight:700>if</span> bottom_win <span style=color:#333>~=</span> <span style=color:#080;font-weight:700>nil</span> <span style=color:#080;font-weight:700>then</span> bottom_win:raise() <span style=color:#080;font-weight:700>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#080;font-weight:700>end</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>myTimer:start()
</span></span></code></pre></div></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/%E6%95%99%E7%A8%8B>教程</a></li></ul></nav></div></article></main><footer><div style=display:flex></div><div class=footer-info>2022 <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-154774927-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></div></body></html>