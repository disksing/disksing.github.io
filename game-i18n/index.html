<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>游戏国际化的一些建议</title><link rel=icon href=http://disksing.com/favicon.png><style>html body{font-family:noto serif sc,sans-serif;background-color:#fff}:root{--accent:red;--border-width:5px}</style><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Noto%20Serif%20SC"><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><link rel=stylesheet href=/css/main.css><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script>$(document).on("click",function(){$(".collapse").collapse("hide")})</script><meta name=generator content="Hugo 0.97.3"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-154774927-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-154774927-1")</script><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script data-ad-client=ca-pub-8963356574249468 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><nav class="navbar navbar-default navbar-fixed-top"><div class=container><div class=navbar-header><a class="navbar-brand visible-xs" href=#>游戏国际化的一些建议</a>
<button class=navbar-toggle data-target=.navbar-collapse data-toggle=collapse>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href=/>主页</a></li><li><a href=/post/>文章</a></li><li><a href=/tip/>知识点</a></li><li><a href=/project/>开源项目</a></li><li><a href=/activity/>动态</a></li><li><a href=/about/>关于</a></li></ul><ul class="nav navbar-nav navbar-right"><li class=navbar-icon><a href=mailto:i@disksing.com><i class="fa fa-envelope-o"></i></a></li><li class=navbar-icon><a href=https://github.com/disksing/><i class="fa fa-github"></i></a></li><li class=navbar-icon><a href=http://weibo.com/539523448><i class="fa fa-weibo"></i></a></li><li class=navbar-icon><a href="http://shang.qq.com/wpa/qunwpa?idkey=ade2895067e4105ce59e0c56863d650543b4448245f179574c6684fe1cb7b5d5"><i class="fa fa-qq"></i></a></li><li class=navbar-icon><a href=https://space.bilibili.com/2207710><i class="fa fa-tv"></i></a></li><li class=navbar-icon><a href=https://twitter.com/disksing/><i class="fa fa-twitter"></i></a></li></ul></div></div></nav><main><div><h1>游戏国际化的一些建议</h1><h5>2015-04-08</h5><a href=http://disksing.com/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91><kbd class=item-tag>游戏开发</kbd></a></div><div align=start class=content><p>随着国内游戏行业的迅速发展以及竞争的加剧，越来越多的游戏产品开始冲出国门，走向世界。对于国内已经成功上线运营的产品，一般来说发布海外产品不会遇到什么技术上的的瓶颈，常常出现的是发布迟缓、bug 频出、版本管理混乱等问题。</p><p>本文试图总结游戏国际化的一些经验，主要关于版本管理和文本翻译这两个方面，不讨论跨国运营或部署，不讨论针对不同文化和习惯的本地化等问题。</p><h3 id=1-不要为每个语言版本建立单独分支>1. 不要为每个语言版本建立单独分支。</h3><p>通常项目开始做国际化版本时已经有了一个比较稳定的中文版，开始做国际化版本时为了保证中文版的稳定，常常会新建一个国际化版本分支交给专人去维护，这样一来就掉进了一个大坑。</p><p>看起来分支和主干互不影响，能最灵活地应对国际化的特殊需求。实际上主干上开发的新功能最后总是要发布到国际化版本上的，分支上做的修改越多做代码合并的工作量就越大，往往到后来靠一个人就忙不过来了，干脆成立新的项目组独立开发国际化版本——这样无疑是人力资源的极大浪费。</p><p>所以合理的做法是不建立分支，开发一个多语言版本的游戏，而不是多个独立的游戏。</p><h3 id=2-尽量不要针对不同地区写特殊代码>2. 尽量不要针对不同地区写特殊代码。</h3><p>不同语言版本都会有一些特殊的需求，再加上由于设计的问题可能产生某些语言版本上的特殊 bug，在不开分支的情况下，开发人员很容易就掉进了第二个坑：在代码中编写大量针对不同地区的特殊代码。</p><p>很显然大量的特殊处理代码会削弱代码的可维护性，特别是多加一个语言版本时需要到打大量补丁，进一步使代码变得混乱不堪。</p><p>所以不到万不得已，尽量不要针对不同地区写特殊代码，而是使用统一的机制来解决不同版本的差异性。比如不同地区上线不同的运营活动，选择使用配置文件进行控制就比在代码中写死更恰当；比如 UI 中的文本在某些语言版本中显示不全，与其针对不同语言设置不同的文本框长度，不如统一将文本框拉至合理的长度，当然做成动态改变文本框长度就更好了。</p><h3 id=3-源代码中不能出现汉字或直接用于显示的字符串>3. 源代码中不能出现汉字或直接用于显示的字符串。</h3><p>把用于显示的字符串放进统一的字典文件不仅使游戏翻译更简单，也便于策划进行维护，即使不考虑做国际化版本也是很有必要的。只是很多程序员的自控能力比较弱，或者说保持代码可维护的意识比较弱，经常为了一时的快就绕过这个约束，带来不必要的麻烦。</p><h3 id=4-服务器代码或配置中不能出现汉字或直接用于显示的字符串>4. 服务器代码或配置中不能出现汉字或直接用于显示的字符串。</h3><p>游戏中的一些文本其实是服务器生成发往客户端的，例如系统邮件、系统公告等。最佳实践是把服务器做成是语言无关的，服务器发给客户端的是字典 Key，客户端根据自己的语言解析后拼装好文本并显示。</p><p>这样一来就不需要针对不同的语言版本打不同的服务器版本了，还可以实现多个语言版本连接同一台服务器。</p><p>举例说明，现在我们需要系统公告<code>恭喜玩家Alice晋升至等级排行榜第1名</code>，中文客户端有如下字典配置：<code>NoticeRank -> 恭喜玩家#user晋升至#rankName第#rank名</code>，<code>LevelRank -> 等级排行榜</code>，服务器发给客户端的消息类似于<code>{Message:"NoticeRank", user:"Alice", rankName:"#LevelRank", rank:"1"}</code>，客户端从字典中取出当前语言的文本，再把参数替换进去生成最终显示用的文字。</p><h3 id=5-尽量不要使用带文字的图片>5. 尽量不要使用带文字的图片。</h3><p>有时候游戏中为了实现特殊的美术效果，常常把文字直接画在图片资源中，其实这种做法对国际化特别不友好，容易在翻译时遗漏，而且重新制作各种语言的不同图片也增加美术的工作量，还会给资源打包带来一些麻烦，所以建议尽量避免。</p><p>如果不得不使用带文字的图片，有以下几点建议供参考：</p><ol><li>开发中使用文档记录所有图片中的文字，并与字典文件一齐交给翻译人员，避免遗漏。</li><li>注意保留图片源文件，便于快速替换。</li><li>体验降级，对品质要求不高的版本可以考虑直接退化成使用系统文字，减少工作量。</li><li>一些常见的游戏术语可以退化成统一使用英文。比如表示暴击的 <code>Critical</code>，表示力量的 <code>Str.</code>。</li><li>订制资源打包脚本，针对不同的语言版本打包不同资源。</li></ol><h3 id=6-设计结构化的字典配置减少冗余>6. 设计结构化的字典配置，减少冗余。</h3><p>结构化的意思是不同的字典词条有层次上的区别，不同的词条是可以互相引用的。</p><p>例如上文提到的系统公告中，<code>NoticeRank</code> 词条就引用了 <code>LevelRank</code> 词条。假如不支持词条互相引用，这个功能就需要<code>恭喜玩家#user晋升至等级排行榜第#rank名</code>，<code>恭喜玩家#user晋升至战斗力排行榜第#rank名</code>，<code>恭喜玩家#user晋升至声望排行榜第#rank名</code>等等多条几乎完全重复的词条。</p><p>使用结构化的字典配置至少有 3 点好处。</p><p>首先易于维护。考虑一下我们想把公告中的<code>恭喜</code>换成<code>祝贺</code>，非结构化的工作量就大了几倍。再考虑如果把字典拆分成几份交给不同的翻译人员同时翻译，很容易同一术语出现几种不同译法。</p><p>其次是更不容易犯错，以前有个项目中角色叫做“英雄”，而实际我们在讨论功能时用的词是“武将”，策划在配置文本时很容易误用，于是游戏中一会儿是“英雄”一会儿是“武将”，特别混乱。如果所有词条都引用同一个 Hero 词条就不存在这个问题了。</p><p>第三点就是省钱——通常翻译都是按行或字数收费的。</p><h3 id=7-不要使用-ds-等标识文本中的变量>7. 不要使用 %d、%s 等标识文本中的变量。</h3><p>很多程序员想当然地让策划使用 %d、%s 来标记变量，生成文本时直接使用 sprintf 函数。这里有个很大的陷阱就是 sprintf 是依赖于参数的次序的。</p><p>比如文本<code>玩家%s对玩家%s造成了%d点伤害</code>，可能在其他语言中语序变成<code>玩家%s被玩家%s造成了%d点伤害</code>，按照原本的次序填入参数后意思完全反过来了。甚至语序可能变成<code>玩家%s将%d点伤害施加于玩家%s</code>，程序在运行时试图将数字填入%s，导致内存访问越界程序崩溃。</p><p>考虑到语序的问题，上面的字典应该配置成<code>玩家#1对玩家#2造成了#3点伤害</code>。更好的做法是使用有意义的变量名：<code>玩家#attacker对玩家#defender造成#damage点伤害</code>。</p><h3 id=8-注意多义词>8. 注意多义词。</h3><p>曾经玩过一个汉化版的小游戏，这个游戏第 1 关的标题处显示的是“1级”，显然原因是 Level 在英语中同时有“关卡”和“等级”的意思，原版游戏中这两处同时使用了 Level 这个词条。</p><p>所以我们要留意中文里的多义词，当两个词条中的同一词汇意义不同时，不能引用同一词条。比如“注册登陆”中的“登陆”和“抢滩登陆”中的“登陆”就要分开。（好吧其实应该是“注册登录”不过这不是重点……）</p><h3 id=9-留意-ui-中文字的长度问题>9. 留意 UI 中文字的长度问题。</h3><p>UI 中文字长度是国际化中的常见问题了，上文也有提到，这里再提供几个思路供参考：</p><ol><li>涉及大段文字时，UI 上的设计不要依赖于当前语言版本的文本长度，最好使用带滚动的文本区域。</li><li>UI 的设计不要太紧凑，为国际化后文本的长度变化预留一定的空间。</li><li>使用文档记录 UI 对文本长度的限制，与字典一并提供给翻译人员。如“杂货店”正常应译为 &ldquo;grocery&rdquo;，但若是限制在 6 字符内翻译为 &ldquo;store&rdquo; 也没问题，若是只有 4 字符的空间还可以用 &ldquo;shop&rdquo;。</li><li>体验降级，使用简单的统一机制解决文本显示不全的问题，比如按钮文字显示不全时自动循环横向滚动。</li></ol><h2 id=总结>总结</h2><p>总的来说，游戏国际化并没有技术上的难点，主要是考验团队的管理规划和绕坑的能力，最重要的是预判可能遇到的问题，提前想好应对措施并严格执行。</p></div><hr><b>欢迎加入技术讨论 QQ 群：</b> 481269635 （硬盘在歌唱）<h4 class=page-header>Comments</h4><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//disksing.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a><h4 class=page-header>Related</h4><div class=item><h4><a href=/pb-on-gamedev/>Protocol Buffers 在游戏中的应用</a></h4><h5>挖掘 PB 的潜能</h5><a href=http://disksing.com/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91><kbd class=item-tag>游戏开发</kbd></a></div><div class=item><h4><a href=/design-change/>策划总改需求怎么办？</a></h4><h5>程序和策划是不应该有隔阂的</h5><a href=http://disksing.com/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91><kbd class=item-tag>游戏开发</kbd></a></div><div class=item><h4><a href=/gameserver-gate/>服务器组件之网关</a></h4><h5>2015-03-11</h5><a href=http://disksing.com/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91><kbd class=item-tag>游戏开发</kbd></a></div></main><footer></footer><p class="copyright text-muted">&copy; 2014-2022 ALL RIGHTS RESERVED
|
本站由 <a href=https://gohugo.io>Hugo</a> 和 <a href=https://github.com/calintat/minimal>Minimal</a> 强力驱动
|
<a href=http://disksing.com/post/index.xml target=_blank><i class="fa fa-rss-square"></i>订阅本站文章</a> <a href=http://github.com/disksing/disksing.github.io/issues/new target=_blank><i class="fa fa-bug"></i>反馈问题</a><br>若无特别说明，本站文章采用 <a rel=license href=http://creativecommons.org/licenses/by/4.0/>CC BY 4.0</a> 进行许可，文中涉及代码采用 <a rel=license href=http://creativecommons.org/publicdomain/zero/1.0/>CC0 1.0 Universal</a> 进行许可</p><script>MathJax={tex:{inlineMath:[["$","$"]],displayMath:[["$$","$$"]]},svg:{fontCache:"global"}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js></script></body></html>