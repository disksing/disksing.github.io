<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>etcd on 硬盘在歌唱</title><link>http://disksing.com/tags/etcd/</link><description>Recent content in etcd on 硬盘在歌唱</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Mon, 27 Jul 2020 00:00:00 +0000</lastBuildDate><atom:link href="http://disksing.com/tags/etcd/index.xml" rel="self" type="application/rss+xml"/><item><title>etcd 的 cluster id</title><link>http://disksing.com/tip/etcd-cluster-id/</link><pubDate>Mon, 27 Jul 2020 00:00:00 +0000</pubDate><guid>http://disksing.com/tip/etcd-cluster-id/</guid><description>找到生成 Cluster ID 的代码，其实不是某种随机法生成的，而是用所有 MemberID hash 出来的。 1func (c *RaftCluster) genID() { 2 mIDs := c.MemberIDs() 3 b := make([]byte, 8*len(mIDs)) 4 for i, id := range mIDs { 5 binary.BigEndian.PutUint64(b[8*i:], uint64(id)) 6 } 7 hash := sha1.Sum(b) 8 c.cid = types.ID(binary.BigEndian.Uint64(hash[:8])) 9}</description></item></channel></rss>